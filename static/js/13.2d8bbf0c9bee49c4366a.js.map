{"version":3,"sources":["webpack:///src/views/ditor.vue","webpack:///./src/views/ditor.vue?7b17","webpack:///./src/views/ditor.vue"],"names":["ditor","inject","data","uid","img","title","date","site","content","methods","fimg","e","_this2","this","_this","file","currentTarget","files","reader","FileReader","readAsDataURL","onload","target","result","params","FormData","append","axios","post","headers","Content-Type","then","res","err","$toast","updateData","arguments","length","undefined","updata","_this3","aData","Date","getFullYear","getMonth","getDate","himg","code","$router","go","reload","created","_this4","get","views_ditor","render","_vm","_h","$createElement","_c","_self","staticStyle","background","attrs","slot","to","icon","_v","_m","data-page","margin-left","staticClass","opacity","type","on","change","src","alt","directives","name","rawName","value","expression","domProps","input","$event","composing","height","size","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.2d8bbf0c9bee49c4366a.js","sourcesContent":["<template>\r\n  <div>\r\n    <mt-header style=\"background:#999\" title=\"写游记\">\r\n      <router-link to=\"/user\" slot=\"left\">\r\n        <mt-button icon=\"back\"></mt-button>\r\n      </router-link>\r\n      <mt-button icon=\"more\" slot=\"right\"></mt-button>\r\n    </mt-header>\r\n    <div class=\"title\">\r\n      <h2>写游记</h2>\r\n    </div>\r\n    <div data-page=\"releaseNotice\">\r\n      <p style=\"margin-left:1rem;\">封面图片:</p>\r\n      <div class=\"positi\">\r\n        <input class=\"input\" style=\"opacity:0;\" type=\"file\" @change=\"fimg\">\r\n        <div class=\"file\">\r\n          <img :src=\"img\" alt=\"\">\r\n        </div>\r\n      </div>\r\n      <div class=\"yjti\">\r\n        <p>主标题：</p>\r\n        <input v-model=\"title\" type=\"text\" class=\"biaoti\"><br>\r\n        <p>地点：</p>\r\n        <input type=\"text\" v-model=\"site\">\r\n        <br>\r\n      </div>\r\n     <vue-html5-editor @change=\"updateData\" :content=\"content\" :height=\"200\"></vue-html5-editor>\r\n     <mt-button size=\"large\" @click=\"updata\">发表</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  inject:['reload'],\r\n  data(){\r\n    return{\r\n      uid:\"\",\r\n      img:\"\",//封面图\r\n      title:\"\",//标题\r\n      date:\"\",//时间\r\n      site:\"\",//地点\r\n      content:\"\"//主体内容\r\n    }\r\n  },\r\n  methods: {\r\n          fimg(e){\r\n            let _this = this;\r\n            var file=e.currentTarget.files[0]\r\n            var reader=new FileReader();\r\n            reader.readAsDataURL(file)\r\n            reader.onload=function(e){\r\n             _this.img=e.target.result\r\n            }\r\n\r\n            var params = new FormData() ;\r\n            params.append(\"file\",file);\r\n\r\n          var config = {\r\n             headers:{'Content-Type': 'multipart/form-data'}\r\n          };\r\n\r\n            this.axios.post(\"fied/upload/timg\",params,config).then(res=>{\r\n               if(res.data.err == 0){\r\n                this.$toast(\"上传失败\")\r\n                \r\n              }else{ \r\n                this.img=res.data.img\r\n              }\r\n            })\r\n          },\r\n          updateData(e = ''){ \r\n            this.content = e;  \r\n          } , \r\n          updata(){\r\n            \r\n           var aData = new Date();//Wed Aug 21 2019 10:00:58 GMT+0800 (中国标准时间)     \r\n           this.date =aData.getFullYear() + \"-\" + (aData.getMonth() + 1) + \"-\" + aData.getDate();\r\n            var date=this.date\r\n            var site=this.site\r\n            var uid=this.uid\r\n            var title=this.title;\r\n            var content=this.content;\r\n            var himg=this.img\r\n            this.axios.post('user/travels',{uid,himg,title,date,site,content}).then(res=>{\r\n              if(res.data.code==1){\r\n                this.$toast(\"发表成功\")\r\n                this.$router.go(-1)\r\n              }else{\r\n                this.$toast(\"发表失败\")\r\n                this.reload()\r\n              }\r\n            })\r\n            \r\n          }\r\n  },\r\n  created() {\r\n    this.axios.get(\"user/user\").then(res=>{\r\n      this.uid=res.data.result[0].uid\r\n    })\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n  .title{\r\n    width:100%;\r\n    height:30px;\r\n    text-align: center;\r\n    padding:20px 0;\r\n  }\r\n  .positi{\r\n    position: relative;\r\n    margin-left:1rem;\r\n    margin-bottom:2rem;\r\n  }\r\n  .file{\r\n    width:10rem;\r\n    height:10rem;\r\n    background: url(\"../assets/file.jpg\") no-repeat;\r\n    background-size:10rem 10rem;\r\n    border:1px dashed #333;\r\n  }\r\n  .file>img{\r\n    width:100%;\r\n  }\r\n  .input{\r\n    width: 10rem;\r\n    height:10rem;\r\n    position: absolute;\r\n    top:0px;left:0px;\r\n  }\r\n  .yjti{\r\n    margin-left:1rem\r\n  }\r\n.biaoti{\r\n  width:90%;\r\n}\r\n\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/ditor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('mt-header',{staticStyle:{\"background\":\"#999\"},attrs:{\"title\":\"写游记\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"/user\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}})],1),_vm._v(\" \"),_c('mt-button',{attrs:{\"slot\":\"right\",\"icon\":\"more\"},slot:\"right\"})],1),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('div',{attrs:{\"data-page\":\"releaseNotice\"}},[_c('p',{staticStyle:{\"margin-left\":\"1rem\"}},[_vm._v(\"封面图片:\")]),_vm._v(\" \"),_c('div',{staticClass:\"positi\"},[_c('input',{staticClass:\"input\",staticStyle:{\"opacity\":\"0\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.fimg}}),_vm._v(\" \"),_c('div',{staticClass:\"file\"},[_c('img',{attrs:{\"src\":_vm.img,\"alt\":\"\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"yjti\"},[_c('p',[_vm._v(\"主标题：\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],staticClass:\"biaoti\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}}),_c('br'),_vm._v(\" \"),_c('p',[_vm._v(\"地点：\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.site),expression:\"site\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.site)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.site=$event.target.value}}}),_vm._v(\" \"),_c('br')]),_vm._v(\" \"),_c('vue-html5-editor',{attrs:{\"content\":_vm.content,\"height\":200},on:{\"change\":_vm.updateData}}),_vm._v(\" \"),_c('mt-button',{attrs:{\"size\":\"large\"},on:{\"click\":_vm.updata}},[_vm._v(\"发表\")])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('h2',[_vm._v(\"写游记\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-910b8ac2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ditor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-910b8ac2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ditor.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ditor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ditor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-910b8ac2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ditor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-910b8ac2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ditor.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}